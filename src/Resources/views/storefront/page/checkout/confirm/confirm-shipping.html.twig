{% sw_extends '@Storefront/storefront/page/checkout/confirm/confirm-shipping.html.twig' %}

{% block page_checkout_confirm_shipping_form_input %}
    {{ parent() }}
{#     Todo: add is-myparcel-shipping-option class #}
{% endblock %}

{% block page_checkout_confirm_shipping_form_label %}
    {{ parent() }}
    {# Todo: only show this form when a myparcel shipping method is selected #}
    {% if shipping.id in page.myparcel_shipping_method_ids %}
        <div class="myparcel_shipping_form mt-3" data-myparcel-option="true" data-shipping-method-id="{{ shipping.id }}" data-target="myparcel[shipping_method_id]">
            {# can't have a from inside a form #}
{#            <form name="myparcel_shipping_form" data-shipping-method-id="{{ shipping.id }}" data-target="myparcel[shipping_method_id]">#}

            {% set morning_delivery_cost = page.my_parcel_morning_delivery_cost %}
            {% set standard_delivery_cost = page.my_parcel_standard_delivery_cost %}
            {% set evening_delivery_cost = page.my_parcel_evening_delivery_cost %}

                <label class="d-block mb-0">
                    <input type="radio" name="myparcel_delivery_type" data-target="myparcel[delivery_type]" value="1" id="myparcel_delivery_type_1_{{ shipping.id }}">
                    <label for="myparcel_delivery_type_1_{{ shipping.id }}">{{ "myparcel.delivery_type_morning"|trans|sw_sanitize }} <span class="cost">{% if morning_delivery_cost != 0 %}{% if evening_delivery_cost > 0 %}+{% endif %}{{ morning_delivery_cost|currency }}{% endif %}</span></label>
                </label>
                <label class="d-block mb-0">
                    <input type="radio" name="myparcel_delivery_type" data-target="myparcel[delivery_type]" value="2" id="myparcel_delivery_type_2_{{ shipping.id }}">
                    <label for="myparcel_delivery_type_2_{{ shipping.id }}">{{ "myparcel.delivery_type_default"|trans|sw_sanitize }} <span class="cost">{% if standard_delivery_cost != 0 %}{% if evening_delivery_cost > 0 %}+{% endif %}{{ standard_delivery_cost|currency }}{% endif %}</span></label>
                </label>
                <label class="d-block mb-0">
                    <input type="radio" name="myparcel_delivery_type" data-target="myparcel[delivery_type]" value="3" id="myparcel_delivery_type_3_{{ shipping.id }}">
                    <label for="myparcel_delivery_type_3_{{ shipping.id }}">{{ "myparcel.delivery_type_evening"|trans|sw_sanitize }} <span class="cost">{% if evening_delivery_cost != 0 %}{% if evening_delivery_cost > 0 %}+{% endif %}{{ evening_delivery_cost|currency }}{% endif %}</span></label>
                </label>
                <label class="d-block mb-0">
                    <input type="checkbox" name="myparcel_requires_signature" data-target="myparcel[requires_signature]" value="1" id="myparcel_requires_signature_{{ shipping.id }}">
                    <label for="myparcel_requires_signature_{{ shipping.id }}">{{ "myparcel.delivery_signature"|trans|sw_sanitize }} <span class="cost"></span></label>
                </label>
                <label class="d-block mb-0">
                    <input type="checkbox" name="myparcel_only_recipient" data-target="myparcel[only_recipient]" value="1" id="myparcel_only_recipient_{{ shipping.id }}">
                    <label for="myparcel_only_recipient_{{ shipping.id }}">{{ "myparcel.delivery_recipient"|trans|sw_sanitize }} <span class="cost"></span></label>
                </label>
{#            </form>#}
        </div>
    {% endif %}
{% endblock %}
