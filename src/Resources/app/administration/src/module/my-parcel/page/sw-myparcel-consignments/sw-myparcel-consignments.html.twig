{% block sw_myparcel_consignments %}
<sw-page class="sw-myparcel-consignments">
    {% block sw_myparcel_smart_bar_header %}
    <template #smart-bar-header>
        {% block sw_myparcel_smart_bar_header_title %}
        <h2>
            {% block sw_myparcel_smart_bar_header_title_text %}
            {{ $tc('sw-myparcel.general.mainMenuItemGeneral') }}: {{ $tc('sw-myparcel.consignments.title') }}
            {% endblock %}
        </h2>
        {% endblock %}
    </template>
    {% endblock %}

    {% block sw_myparcel_smart_bar_actions %}
    <template #smart-bar-actions>
        <sw-button :disabled="!downloadMultipleLabelsAvailable" variant="primary" :square="false" :block="false" :isLoading="false" @click="onOpenDownloadMultipleLabelsModal">
            {{ $tc('sw-myparcel.consignments.buttons.downloadLabelsButton') }}
        </sw-button>
    </template>
    {% endblock %}

    {% block sw_myparcel_content %}
    <template #content>
        <sw-data-grid
                :dataSource="consignments"
                :columns="consignmentColumns"
                :fullPage="true"
                :showSettings="true"
                :showSelection="true"
                :sortBy="sortBy"
                :sortDirection="sortDirection"
                :isLoading="isLoading"
                :allowColumnEdit="false"
                identifier="sw-myparcel-consignment-list"
                @column-sort="onSortColumn"
                @selection-change="onSelectionChanged">

            <template #column-createdAt="{ item }">
                {{ item.createdAt | date({hour: '2-digit', minute: '2-digit', second: '2-digit'}) }}
            </template>

            <template #column-order.orderDateTime="{ item }">
                {{ item.order.orderDateTime | date({hour: '2-digit', minute: '2-digit', second: '2-digit'}) }}
            </template>

            <template #column-shippingOption.packageType="{ item }">
                {{ packageTypes[item.shippingOption.packageType] }}
            </template>

            <template #column-shippingOption.carrierId="{ item }">
                {{ carriers[item.shippingOption.carrierId] }}
            </template>

            <template #column-shippingOption.deliveryType="{ item }">
                {{ deliveryTypes[item.shippingOption.deliveryType] }}
            </template>

            <template #column-shippingOption.requiresAgeCheck="{ item }">
                <sw-icon name="default-basic-checkmark-line" v-if="item.shippingOption.requiresAgeCheck === true" small="true" />
                <span v-else />
            </template>

            <template #column-shippingOption.requiresSignature="{ item }">
                <sw-icon name="default-basic-checkmark-line" v-if="item.shippingOption.requiresSignature === true" small="true" />
                <span v-else />
            </template>

            <template #column-shippingOption.onlyRecipient="{ item }">
                <sw-icon name="default-basic-checkmark-line" v-if="item.shippingOption.onlyRecipient === true" small="true" />
                <span v-else />
            </template>

            <template #column-shippingOption.returnIfNotHome="{ item }">
                <sw-icon name="default-basic-checkmark-line" v-if="item.shippingOption.returnIfNotHome === true" small="true" />
                <span v-else />
            </template>

            <template #column-shippingOption.largeFormat="{ item }">
                <sw-icon name="default-basic-checkmark-line" v-if="item.shippingOption.largeFormat === true" small="true" />
                <span v-else />
            </template>

            <template #actions="{ item }">
                <sw-context-menu-item class="sw-myparcel-shipping-options-list__download-consignment-action" @click="onOpenDownloadSingleLabelModal(item)">
                    {{ $tc('sw-myparcel.orders.buttons.downloadLabel') }}
                </sw-context-menu-item>
            </template>

            <template slot="pagination">
                <sw-pagination
                        :page="page"
                        :limit="limit"
                        :total="total"
                        :total-visible="25"
                        @page-change="onPageChange"
                        :steps="[25]">
                </sw-pagination>
            </template>

        </sw-data-grid>

        <sw-modal v-if="downloadSingleLabel.showModal === true"
                  :title="$tc('sw-myparcel.consignments.modals.downloadLabels.titleSingle')"
                  @modal-close="onCloseDownloadSingleLabelModal"
                  variant="small">

            <form>

                <sw-multi-select
                        :label="$tc('sw-myparcel.consignments.modals.downloadLabels.printPositionHeading')"
                        name="myparcel[print_position]"
                        v-model="downloadSingleLabel.printPosition"
                        :options="[
                                { value: 1, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionTopLeftLabel') },
                                { value: 2, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionTopRightLabel') },
                                { value: 3, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionBottomLeftLabel') },
                                { value: 4, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionBottomRightLabel') },
                            ]">
                </sw-multi-select>

            </form>

            <template slot="modal-footer">
                <sw-button @click="onCloseDownloadSingleLabelModal" size="small">
                    {{ $tc('sw-myparcel.consignments.buttons.cancelButton') }}
                </sw-button>
                <sw-button @click.prevent="onDownloadSingleLabel" :isLoading="downloadSingleLabelLoading" variant="primary" size="small">
                    {{ $tc('sw-myparcel.consignments.buttons.downloadLabelButton') }}
                </sw-button>
            </template>
        </sw-modal>

        <sw-modal v-if="downloadMultipleLabels.showModal === true"
                  :title="$tc('sw-myparcel.consignments.modals.downloadLabels.titleMultiple', 0, { numberOfItems: selectionCount })"
                  @modal-close="onCloseDownloadMultipleLabelsModal"
                  variant="small">

            <form>

                <sw-multi-select
                        :label="$tc('sw-myparcel.consignments.modals.downloadLabels.printPositionHeading')"
                        name="myparcel[print_position]"
                        v-model="downloadMultipleLabels.printPosition"
                        :options="[
                                { value: 1, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionTopLeftLabel') },
                                { value: 2, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionTopRightLabel') },
                                { value: 3, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionBottomLeftLabel') },
                                { value: 4, label: $tc('sw-myparcel.consignments.modals.downloadLabels.positionBottomRightLabel') },
                            ]">
                </sw-multi-select>

            </form>

            <template slot="modal-footer">
                <sw-button @click="onCloseDownloadMultipleLabelsModal" size="small">
                    {{ $tc('sw-myparcel.consignments.buttons.cancelButton') }}
                </sw-button>
                <sw-button @click.prevent="onDownloadMultipleLabels" :isLoading="downloadMultipleLabelsLoading" variant="primary" size="small">
                    {{ $tc('sw-myparcel.consignments.buttons.downloadLabelsButton') }}
                </sw-button>
            </template>
        </sw-modal>
    </template>
    {% endblock %}
</sw-page>
{% endblock %}